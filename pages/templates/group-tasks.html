<html>
    <head>
         {% load bootstrap5 %}
  {% bootstrap_css %}
  {% bootstrap_javascript %}
  {% load static %}
   <link rel="stylesheet" href="{% static 'global.css' %}">  
   <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Truculenta:opsz,wght@12..72,100..900&display=swap" rel="stylesheet">
    </head>
    <body>
      <ul>
        {% comment %} {% for task in tasks_data %}
            <li>
                Task ID: {{ task.pk }}<br>
                Task Brief: {{ task.task_brief }}<br>
                Description: {{ task.description }}<br>
                Priority: {{ task.priority }}<br>
                Status: {{ task.status }}<br>
                Due Date: {{ task.due_date }}<br>
                Created By: {{ task.created_by_name }}<br>
                Assigned To: {{ task.assigned_to }}<br>
            </li>
        {% endfor %} {% endcomment %}
    </ul>
        <div class="container mt-5">
            <div class="card">
              <div class="card-header bg-dark text-white">
                {{ task.task_brief }}
              </div>
              <div class="card-body">
                <div class="row mt-2">
                    <div class="col-sm-8" style="color: red">{{task.priority}}</div>
                   
                    <div class="row justify-content-end col-sm-4">
                      {% for assigned_to_item in task.assigned_to %}
                        <div class="col-auto">
                          <div class="circle" data-bs-toggle="tooltip" data-bs-placement="top" title="{{ assigned_to_item.username }}">
                            {% comment %} <ul> {% endcomment %}
                             
                                  {{ assigned_to_item.username| slice:"0:1"| upper  }}
                        
                          {% comment %} </ul> {% endcomment %}
                          </div>
                        </div>
                        {% endfor %}
                      </div>
                  </div>
                
                <div class="row mt-2">
                  <div class="col-sm-12">{{ task.description }}</div>
                </div>
                <div class="row mt-3">
                  <div class="col-sm-2"><strong>Due Date:</strong></div>
                  <div class="col-sm-8">{{ task.due_date }}</div>
                  <div class="col-sm-2" style="text-align: right; color: green">{{task.status}}</div>
                </div>
              </div>
            </div>
          </div>        
        <script>

        let task_data = null;
        let group_id = "{{ group_id }}";  
          //loads the data for all the task in this group.
          fetch(`/fetch_group_task/${group_id}/`)
            .then(response => response.json())
            .then(data => {
                task_data = data;
                console.log(task_data);
            })


        </script>
    </body>
</html>